<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="HppDonatApp.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.ThemeDictionaries>
                <ResourceDictionary x:Key="Light">
                    <SolidColorBrush x:Key="CardSurfaceBrush" Color="#FFF8F8F8" />
                    <SolidColorBrush x:Key="CardBorderBrush" Color="#22000000" />
                </ResourceDictionary>
                <ResourceDictionary x:Key="Dark">
                    <SolidColorBrush x:Key="CardSurfaceBrush" Color="#FF2A2A2A" />
                    <SolidColorBrush x:Key="CardBorderBrush" Color="#33FFFFFF" />
                </ResourceDictionary>
            </ResourceDictionary.ThemeDictionaries>
        </ResourceDictionary>
    </Page.Resources>
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid x:Name="RootSettingsContent"
              Padding="16"
              RowSpacing="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0"
                       Text="Settings"
                       FontSize="28"
                       FontWeight="SemiBold" />

            <Border Grid.Row="1"
                    Padding="10"
                    BorderBrush="{ThemeResource CardBorderBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Background="{ThemeResource CardSurfaceBrush}">
                <StackPanel Spacing="8">
                    <TextBox Header="Gemini API Key"
                             Text="{Binding GeminiApiKey, Mode=TwoWay}" />
                    <TextBox Header="Gemini Model"
                             Text="{Binding GeminiModel, Mode=TwoWay}" />
                </StackPanel>
            </Border>

            <Grid Grid.Row="2" ColumnSpacing="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Button Grid.Column="0"
                        Command="{Binding SaveSettingsCommand}"
                        Content="Simpan Settings" />
                <Button Grid.Column="1"
                        Command="{Binding TestConnectionCommand}"
                        Content="Test Koneksi" />
            </Grid>

            <Border Grid.Row="3"
                    Padding="10"
                    BorderBrush="{ThemeResource CardBorderBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Background="{ThemeResource CardSurfaceBrush}">
                <TextBlock Text="{Binding StatusMessage}"
                           TextWrapping="WrapWholeWords" />
            </Border>

            <TextBlock Grid.Row="4"
                       Text="Tips: simpan dulu API key, lalu klik Test Koneksi."
                       Opacity="0.7" />
        </Grid>
    </ScrollViewer>
</Page>

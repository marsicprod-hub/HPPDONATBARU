<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="HppDonatApp.Views.DashboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:HppDonatApp.Views"
    Title="Dashboard">

    <ScrollViewer>
        <Grid Padding="24" ColumnSpacing="16" RowSpacing="16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" 
                Text="Dashboard HPP Donat Calculator" 
                Style="{StaticResource TitleTextBlockStyle}" 
                Margin="0,0,0,16"/>

            <!-- Summary Cards Row 1 -->
            <Border Grid.Row="1" Grid.Column="0" 
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1" CornerRadius="8" Padding="16">
                <StackPanel Spacing="8">
                    <TextBlock Text="Total Resep" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    <TextBlock x:Name="TotalRecipesCount" Text="0" Style="{StaticResource HeaderTextBlockStyle}" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                    <TextBlock Text="Aktif dalam sistem" Style="{StaticResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </Border>

            <Border Grid.Row="1" Grid.Column="1" 
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1" CornerRadius="8" Padding="16">
                <StackPanel Spacing="8">
                    <TextBlock Text="Total Bahan" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    <TextBlock x:Name="TotalIngredientsCount" Text="0" Style="{StaticResource HeaderTextBlockStyle}" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                    <TextBlock Text="Tersedia di gudang" Style="{StaticResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </Border>

            <!-- Summary Cards Row 2 -->
            <Border Grid.Row="2" Grid.Column="0" 
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1" CornerRadius="8" Padding="16">
                <StackPanel Spacing="8">
                    <TextBlock Text="Rata-rata HPP" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    <TextBlock x:Name="AverageHPPDisplay" Text="Rp 0" Style="{StaticResource HeaderTextBlockStyle}" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                    <TextBlock Text="Per batch standar" Style="{StaticResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </Border>

            <Border Grid.Row="2" Grid.Column="1" 
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1" CornerRadius="8" Padding="16">
                <StackPanel Spacing="8">
                    <TextBlock Text="Harga Jual Rekomendasi" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    <TextBlock x:Name="RecommendedPriceDisplay" Text="Rp 0" Style="{StaticResource HeaderTextBlockStyle}" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                    <TextBlock Text="Dengan margin 30%" Style="{StaticResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </Border>

            <!-- Recent Activity Section -->
            <TextBlock Grid.Row="3" Grid.Column="0" 
                Text="Resep Terbaru" 
                Style="{StaticResource SubheaderTextBlockStyle}"
                Margin="0,16,0,8"/>

            <!-- Recent Recipes List -->
            <ListViewHeaderItem Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="150"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Nama Resep" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    <TextBlock Grid.Column="1" Text="HPP" Style="{StaticResource BodyStrongTextBlockStyle}" Margin="16,0,0,0"/>
                    <TextBlock Grid.Column="2" Text="Harga Jual" Style="{StaticResource BodyStrongTextBlockStyle}" Margin="16,0,0,0"/>
                </Grid>
            </ListViewHeaderItem>

            <ListView Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" 
                x:Name="RecentRecipesList"
                SelectionMode="Single"
                ItemsSource="{x:Bind ViewModel.RecentRecipes, Mode=OneWay}"
                Margin="0,0,0,16">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="local:RecipeDisplayModel">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="150"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Spacing="4">
                                <TextBlock Text="{x:Bind RecipeName}" Style="{StaticResource BodyTextBlockStyle}"/>
                                <TextBlock Text="{x:Bind LastModified}" Style="{StaticResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            </StackPanel>
                            <TextBlock Grid.Column="1" Text="{x:Bind EstCostPerBatch}" Margin="16,0,0,0"/>
                            <TextBlock Grid.Column="2" Text="{x:Bind RecommendedPrice}" Margin="16,0,0,0"/>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
    </ScrollViewer>
</Page>
